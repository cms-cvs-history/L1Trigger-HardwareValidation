
process EcalRctPattTest = {

    include "FWCore/MessageLogger/data/MessageLogger.cfi"


    source = HcalPatternSource {
        untracked string Patterns = "spikes_every_5ts.xml"
        untracked vint32 Bunches = {5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20}
    }

    untracked PSet maxEvents = {untracked int32 input = 1}

    # HCAL TPG digis
    module hcalPattDigis = HcalTrigPrimDigiProducer {
        int32 latency = 1
        vdouble weights = {1, 1} //hardware algo		
        bool peakFilter = true //peak finding on or off
        InputTag inputLabel = source
    }

    # RCT emulator
    include "L1TriggerConfig/L1ScalesProducers/data/L1CaloScalesConfig.cff"

    module rctEmulDigis = L1RCTProducer {
      InputTag ecalInputLabel = none
      InputTag hcalInputLabel = 
      bool useEcal = false
      bool useHcal = true
      FileInPath lutFile = "L1Trigger/RegionalCaloTrigger/data/RCTLUTParameters.txt"
      FileInPath lutFile2 = "L1Trigger/RegionalCaloTrigger/data/RCTHcalScaleFactors.txt"
      untracked bool orcaFileInput = false   # file below will not be used - but is there for info
      FileInPath src = "L1Trigger/RegionalCaloTrigger/data/rct-input-1.dat"
      string rctTestInputFile = "-NONE-"
      string rctTestOutputFile = "-NONE-"
      untracked bool patternTest = false
    }


    sequence emul = { hcalPattDigis, rctEmulDigis }

    # RCT HW digis from Source Card
    module rctHwDigis = SourceCardTextToRctDigi {
      string TextFileName = "walking1s-sc-0-0-000.txt"
      int32 SkipEvents = 0
    }

    sequence hw = { rctHwDigis }

    # comparator
    module l1compare = L1Comparator {
      untracked string RCT_dataLabel = "l1RctHwDigis"
      untracked string RCT_emulLabel = "l1RctEmulDigis"
      untracked string GCT_dataLabel = ""
      untracked string GCT_emulLabel = ""
      untracked string GT_dataLabel  = ""
      untracked string GT_emulLabel  = ""
      untracked string DumpFile      = "dump.txt"
      untracked vuint32 COMPARE_COLLS= { 1,0,0 }
    }
   
    path p = { emul & hw, l1compare }

}